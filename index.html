<html>
	<head>
		<link rel="stylesheet" href="style.css" type="text/css">
	</head>
	<body>
		<script src="code/brainfuckRenderer.js"></script>
		<script src="code/brainfuckMachine.js"></script>
		
		<input type="file" id="inputScript"></input>
		<button id="run">RUN</button>
		<button id="runSlow">RUN SLOW</button>
		<button id="letters">Toggle to letters</button>
		<br>
		<div id="inputDiv"><input id="userInput" type="text"><button id="input">Input to Brainfuck</button></div>
		<div id="outputDiv"></div>
		<script>
			var inEl = document.getElementById("userInput");
			inEl.disabled = true;
			var brainfuck = new BrainfuckMachine(",++.", inEl);
			var bEl = brainfuck.renderer.element;
			bEl.align = "left";
			document.body.appendChild(bEl);
			brainfuck.renderer.last = 0;
		</script>
		<script>
			var el = document.getElementById("inputScript");
			var inElSend = document.getElementById("input");
			var reader = new FileReader();
			var runner = document.getElementById("run");
			var runnerSlow = document.getElementById("runSlow");
			var letters = document.getElementById("letters");
			function loaded(string){
				console.log(string);
			};
			reader.onload = function(){
				loaded(reader.result);
			};
			el.onchange = function (){
				reader.readAsText(el.files[0]);
			};
			runner.onclick = function (){
				brainfuck.code = reader.result;
				brainfuck.doAll();
			};
			runnerSlow.onclick = function (){
				brainfuck.code = reader.result;
				brainfuck.doAllSlow();
			};
			letters.onclick = function (){
				brainfuck.renderer.letters = !brainfuck.renderer.letters;
			};
			inElSend.onclick = function (){
				if(brainfuck.waitingForInput){
					brainfuck.input(parseInt(inEl.value));
				}
			};
		</script>
	</body>
</html>